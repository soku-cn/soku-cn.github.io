import{_ as m,c as h,a as l,e as o,w as i,r,o as u,b as e,d as a}from"./app-PIWu6ZXw.js";const p={},f={class:"hint-container caution"};function g(b,t){const d=r("RouteLink"),c=r("Tabs");return u(),h("div",null,[t[10]||(t[10]=l('<div class="hint-container caution"><p class="hint-container-title">部分 Intel CPU 使用后此补丁可能会发生窗口放大后黑屏的 Bug，此时请移除 wined3d.dll 以禁用此补丁</p></div><div class="hint-container info"><p class="hint-container-title">问题原因</p><p><strong>新的 Intel CPU 核显，搭配新版本 Intel 核显的驱动程序，对非想天则这个旧游戏有 Bug</strong></p><figure><img src="https://bu.dusays.com/2024/01/21/65acc4c45b122.webp" alt="图片加载中..." width="500" tabindex="0" loading="lazy"><figcaption>如：灵梦 JA 的黄色护符特效变成一根线，早苗 C 弹星星变成一根线等</figcaption></figure></div>',2)),o(c,{data:[{id:"解决办法1（无独显）"},{id:"解决办法2（有独显）"}]},{title0:i(({value:s,isActive:n})=>[...t[0]||(t[0]=[a("解决办法1（无独显）",-1)])]),title1:i(({value:s,isActive:n})=>[...t[1]||(t[1]=[a("解决办法2（有独显）",-1)])]),tab0:i(({value:s,isActive:n})=>[t[7]||(t[7]=e("div",{class:"hint-container tip"},[e("p",{class:"hint-container-title"},"解决办法1（无独显）"),e("p",null,[e("strong",null,"1、下载补丁")]),e("ul",null,[e("li",null,[e("a",{href:"https://gitee.com/sanhuizhuan/SokuMods/releases/download/v1/%E4%BF%AE%E5%A4%8D%E9%9D%9E%E6%83%B3%E5%A4%A9%E5%88%99%E7%89%B9%E6%95%88%E5%8F%98%E6%88%90%E4%B8%80%E6%A0%B9%E7%BA%BFBUG%E7%9A%84%E8%A1%A5%E4%B8%81-d3d9_0.4.2%20wined3d_9.4-staging%E3%80%902024-3-10%E3%80%91.zip",target:"_blank",rel:"noopener noreferrer"},"修复非想天则特效变成一根线 BUG 的补丁【2024-3-10】.zip")])]),e("hr"),e("p",null,[e("strong",null,"2、安装补丁")]),e("p",null,[e("strong",null,"把压缩包内 th123 文件夹里的 3 个 dll 文件，放到你的游戏文件夹内，和 th123.exe 同目录，提示重复点覆盖")]),e("div",{class:"language- line-numbers-mode","data-highlighter":"shiki","data-ext":"",style:{"--shiki-light":"#383A42","--shiki-dark":"#abb2bf","--shiki-light-bg":"#FAFAFA","--shiki-dark-bg":"#282c34"}},[e("pre",{class:"shiki shiki-themes one-light one-dark-pro vp-code"},[e("code",{class:"language-"},[e("span",{class:"line"},[e("span",null,"d3d9.dll")]),a(`
`),e("span",{class:"line"},[e("span",null,"d3d9_custom.dll")]),a(`
`),e("span",{class:"line"},[e("span",null,"wined3d.dll")]),a(`
`),e("span",{class:"line"},[e("span",null,"th123.exe")])])]),e("div",{class:"line-numbers","aria-hidden":"true",style:{"counter-reset":"line-number 0"}},[e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"}),e("div",{class:"line-number"})])]),e("p",null,[e("strong",null,"这四个文件处于同一个文件夹内，即可")]),e("hr"),e("p",null,"3、卸载补丁"),e("p",null,[a("把 "),e("code",null,"d3d9_custom.dll"),a(" 和 "),e("code",null,"wined3d.dll"),a(" 两个文件改名或者移除")])],-1)),e("div",f,[t[4]||(t[4]=e("p",{class:"hint-container-title"},"补丁的已知BUG",-1)),t[5]||(t[5]=e("p",null,[e("strong",null,[a("1、使用补丁后，OBS"),e("code",null,'"游戏源"'),a("录制非想天则时会出现问题，换成"),e("code",null,'"窗口采集"'),a("即可正常录制")])],-1)),t[6]||(t[6]=e("p",null,[e("strong",null,[a("2、没有这个特效变成一根线 BUG 的电脑最好不要安装这个补丁，否则可能会打不开游戏，删掉"),e("code",null,"d3d9_custom.dll"),a("就可以打开了")])],-1)),e("p",null,[e("strong",null,[t[3]||(t[3]=a("3、使用补丁后无法使用",-1)),o(d,{to:"/mods/AdvancedMods/ReplayDnD.html"},{default:i(()=>[...t[2]||(t[2]=[a("Rep转mp4功能",-1)])]),_:1})])])]),t[8]||(t[8]=e("p",null,null,-1))]),tab1:i(({value:s,isActive:n})=>[...t[9]||(t[9]=[e("div",{class:"hint-container tip"},[e("p",{class:"hint-container-title"},"解决办法2（有独显）"),e("p",null,'桌面右键点开 NVIDIA控制面板 找到 "管理 3D 设置" 点到"全局设置"标签页 将 "首选图形处理器" 设置为 "高性能 NVIDIA 处理器" 点击 "应用"')],-1)])]),_:1}),t[11]||(t[11]=l('<details class="hint-container details"><summary>一些技术解释 - 修复非想天则特效变成一根线BUG的补丁</summary><blockquote><p>[!note]</p><blockquote><p>感谢 Hagb 大佬提供的补丁</p></blockquote><p><strong>虽然在某些较新的 Intel 集显驱动下非想天则有特效缺失，但使用其他第三方 DirectX 实现（如 WineD3D、DXVK）能够绕过这个问题。</strong></p><p>补丁包文件：</p><ul><li>d3d9.dll: mod 加载器，加入了加载自定义 DirectX 库的支持。<a href="https://github.com/SokuDev/SokuMods/pull/25" target="_blank" rel="noopener noreferrer">d3d9 ModLoader_0.4.2 的源码</a></li><li>d3d9_custom.dll: &quot;自定义&quot;的 d3d9 接口，<a href="https://downloads.fdossena.com/geth.php?r=wined3dst-latest" target="_blank" rel="noopener noreferrer">来自 fdossena 下载的 WineD3D</a></li><li>wined3d.dll: 前一个文件的依赖项。<a href="https://github.com/adolfintel/wined3d4win" target="_blank" rel="noopener noreferrer">WineD3D For Windows Build Scripts 源码</a></li></ul><div class="hint-container info"><p class="hint-container-title">一些细节</p><p>由于不明原因，在较新的 Intel 集显及其驱动上，微软提供的 DirectX 实现会将某些图像素材错误地渲染成一根（一些）细线。根据一些用户所说，<a href="https://community.intel.com/t5/Graphics/Iris-Xe-Graphics-doesn-t-run-DirectX-9-game-properly/m-p/1444706#M112728" target="_blank" rel="noopener noreferrer">DXVK 可以把它们正确地渲染出来</a>。</p><p>DXVK 一般在 Wine 上使用（这是一个用于在类 unix 系统上运行 Windows 程序的兼容层）。在 Wine 中，我们一般用 WineD3D 或者 DXVK 而非微软的来作为 DirectX 的实现。它们也都是兼容层，即它们自己提供 DirectX API 被应用调用，而后它们会把这些 DirectX 形式的调用&quot;翻译&quot;成其他类型的 API 并调用之。DXVK 基于 Vulkan，WineD3D 则基于 OpenGL。（即，应用程序把 DXVK 作为 DirectX 接口调用，而 DXVK 则调用 Vulkan 来完成和对应 DirectX 调用等价的事情；WineD3D 同理。）</p><p>这些兼容层虽然是为 Wine 提供的，但实际上也是基于 Windows API 编写，理论上来说保留了对 Windows 的兼容性，因此是有可能用在 Windows 上的。于是我分别尝试了 DXVK 和 WineD3D，发现它们都能在我的 N 卡上良好运行，因此我把它们发给受 DirectX 渲染问题困扰的用户让他们测试（直接把它们在系统层面应用是有风险的，所以要配合专门为此进行了修改的非想天则 mod 加载器，来单独给非想天则加载这些库）。</p></div><p><strong>DXVK 和 WineD3D 两种方案默认配置下的测试结果</strong></p><div class="hint-container info"><p class="hint-container-title">可用性</p><ul><li>WineD3D：在 Wine 上是默认选择；而在所有我所知的受 DirectX 图像缺失问题的设备上，基于 WineD3D 的方案也都能在 Windows 开箱即用，然后问题也确实消失了。此外，WineD3D 也能在多显卡的环境（比如集显+独显）下，遵循用户手动指定的显卡。不过有的 AMD 集显用户反映使用了之后游戏无法正常启动。（不过问题不大，这个解决方案本来也不是面向他们的。）</li><li>DXVK：在 Wine 社区中被普遍认为是性能更好的选择，因此许多 Wine 发行版会把 DXVK 作为默认的 DirectX 实现。支持 Vulkan 的硬件和驱动没有那么多，因此 DXVK 的支持范围自然也小一些。有用户反馈他的设备（使用 Intel 集显）无法直接使用 DXVK。</li></ul></div><div class="hint-container info"><p class="hint-container-title">性能</p><p>大家普遍认为 DXVK 性能比 WineD3D 的好，但这点至少在我们这里的目标用户那儿没有体现出来：我询问了几个用户，结果都是 WineD3D 的 GPU 占用率和 DXVK 基本相当，而 DXVK 占用的内存却比 WineD3D 大不少。</p><p>关于性能相当的可能的解释是：Intel 对 OpenGL 的实现较好，达到了比较好的性能。（事实上，我的 N 卡上结果中，性能从好到坏依次为 DXVK、微软的实现、WineD3D，在数值上有较为明显的差别。）</p><p>关于内存占用的可能的解释是：在测试中，DXVK 趋向于将素材放到显存中，而 WineD3D 则并不是这样，同时前者在&quot;显存&quot;中消耗的体积比后者在内存中消耗的体积更大。在集显的&quot;显存&quot;中分配，实际上也是动态分配并使用了内存，从而从结果来说 DXVK 占用总内存更大。</p></div></blockquote></details>',1))])}const q=m(p,[["render",g]]),T=JSON.parse('{"path":"/FAQ/In-Games/MissingGraphic.html","title":"【已修复】游戏特效贴图消失","lang":"zh-CN","frontmatter":{"title":"【已修复】游戏特效贴图消失","icon":"circle-info","order":1,"editLink":false,"author":"三回転Tstar","date":"2024-03-10T00:00:00.000Z","description":"部分 Intel CPU 使用后此补丁可能会发生窗口放大后黑屏的 Bug，此时请移除 wined3d.dll 以禁用此补丁 问题原因 新的 Intel CPU 核显，搭配新版本 Intel 核显的驱动程序，对非想天则这个旧游戏有 Bug 图片加载中...如：灵梦 JA 的黄色护符特效变成一根线，早苗 C 弹星星变成一根线等 一些技术解释 - 修复非想天...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"【已修复】游戏特效贴图消失\\",\\"image\\":[\\"https://bu.dusays.com/2024/01/21/65acc4c45b122.webp \\\\\\"如：灵梦 JA 的黄色护符特效变成一根线，早苗 C 弹星星变成一根线等\\\\\\"\\"],\\"datePublished\\":\\"2024-03-10T00:00:00.000Z\\",\\"dateModified\\":\\"2025-09-24T05:46:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"三回転Tstar\\"}]}"],["meta",{"property":"og:url","content":"https://wiki.514.live/FAQ/In-Games/MissingGraphic.html"}],["meta",{"property":"og:site_name","content":"非想天则指南"}],["meta",{"property":"og:title","content":"【已修复】游戏特效贴图消失"}],["meta",{"property":"og:description","content":"部分 Intel CPU 使用后此补丁可能会发生窗口放大后黑屏的 Bug，此时请移除 wined3d.dll 以禁用此补丁 问题原因 新的 Intel CPU 核显，搭配新版本 Intel 核显的驱动程序，对非想天则这个旧游戏有 Bug 图片加载中...如：灵梦 JA 的黄色护符特效变成一根线，早苗 C 弹星星变成一根线等 一些技术解释 - 修复非想天..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://bu.dusays.com/2024/01/21/65acc4c45b122.webp \\"如：灵梦 JA 的黄色护符特效变成一根线，早苗 C 弹星星变成一根线等\\""}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-24T05:46:06.000Z"}],["meta",{"property":"article:author","content":"三回転Tstar"}],["meta",{"property":"article:published_time","content":"2024-03-10T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-24T05:46:06.000Z"}]]},"git":{"createdTime":1690871118000,"updatedTime":1758692766000,"contributors":[{"name":"Tstar00","username":"Tstar00","email":"1434716883@qq.com","commits":26,"url":"https://github.com/Tstar00"},{"name":"ChocoFleece","username":"ChocoFleece","email":"zhongzi2333@gmail.com","commits":1,"url":"https://github.com/ChocoFleece"},{"name":"zhongzi26","username":"zhongzi26","email":"zhongzi2333@gmail.com","commits":1,"url":"https://github.com/zhongzi26"}],"changelog":[{"hash":"9fdbaeeca13c7d4c306d837d8d2e4d2c16626728","time":1758692766000,"email":"zhongzi2333@gmail.com","author":"zhongzi26","message":"将全站所有图片更新至新版语法，以及一些修补。"},{"hash":"6f34e469eeca8612a3be0e567a4592efe1e3e417","time":1749787390000,"email":"1434716883@qq.com","author":"Tstar00","message":"部分 Intel CPU 使用后此补丁可能会发生窗口放大后黑屏的 Bug，此时请移除 wined3d.dll 以禁用此补丁"},{"hash":"afd5acf7fdb3643a78004f1b3fe2e0b4569023dd","time":1736232021000,"email":"1434716883@qq.com","author":"Tstar00","message":"游戏内特效贴图消失变成一根线（已修复）"},{"hash":"ae69e45e0d1b8d039183f54d5ac9058bdadbae00","time":1719812599000,"email":"1434716883@qq.com","author":"Tstar00","message":"对战界面下方数字含义"},{"hash":"95c190d093b38a02e5f55c53c04b1d2801e7ce55","time":1710854829000,"email":"1434716883@qq.com","author":"Tstar00","message":"12345"},{"hash":"42c8670476cf1c4bff2f6bfe25bdaa11f3658e3a","time":1710594410000,"email":"1434716883@qq.com","author":"Tstar00","message":"22"},{"hash":"d939765ac94d77ac771e25185e3ea91febfaaa45","time":1710493465000,"email":"1434716883@qq.com","author":"Tstar00","message":"1"},{"hash":"dff20d9abae865a6d023d4814f730be387b515eb","time":1710248047000,"email":"1434716883@qq.com","author":"Tstar00","message":"1"},{"hash":"ca2c63bf0e9e8acdac138beed7ee16199a81ffa0","time":1710243592000,"email":"1434716883@qq.com","author":"Tstar00","message":"1"},{"hash":"3f2f0762987786fee84923ceb829d4b1379bce4e","time":1710242687000,"email":"1434716883@qq.com","author":"Tstar00","message":"22"},{"hash":"b77766e02228add029d73e0a8f98c3ef300d5bd5","time":1710132754000,"email":"1434716883@qq.com","author":"Tstar00","message":"1"},{"hash":"86c6b319cb072edc887f6159d5a47105afff3ce8","time":1710129523000,"email":"1434716883@qq.com","author":"Tstar00","message":"游戏内部分弹幕和特效贴图消失（变成一根线）"},{"hash":"71a8ccc4393840d1fbbfaf98f796b259a89a9bd1","time":1710084502000,"email":"1434716883@qq.com","author":"Tstar00","message":"12121"},{"hash":"45c17ef4a55ee3d4f0c82337178ffd95d2f7369f","time":1709296953000,"email":"1434716883@qq.com","author":"Tstar00","message":"2"},{"hash":"2bf27d9eb7ec53fa22e852f1f8a8f6c8b20466c3","time":1709292515000,"email":"1434716883@qq.com","author":"Tstar00","message":"1"},{"hash":"f38d71226e0bf9680bd27e1d47732c61a86e5fba","time":1705821847000,"email":"1434716883@qq.com","author":"Tstar00","message":"22"},{"hash":"c6957491af5eadb058cc194e52c04b35022c7995","time":1705821350000,"email":"1434716883@qq.com","author":"Tstar00","message":"xiu"},{"hash":"ea4c14325baf251fa0c7a30ac51ca4fe231ab313","time":1705206417000,"email":"1434716883@qq.com","author":"Tstar00","message":"2"},{"hash":"0853516ccf2079f18332a4e183cac3f1bfb57fd0","time":1702907151000,"email":"1434716883@qq.com","author":"Tstar00","message":"+"},{"hash":"ce4aa9c5cffc23b783d64e285155993e19dcbef3","time":1700496200000,"email":"1434716883@qq.com","author":"Tstar00","message":"+"},{"hash":"27f3a2745032deb0eb20842289113e91248ad0de","time":1696568773000,"email":"1434716883@qq.com","author":"Tstar00","message":"34"},{"hash":"75f8e1b1a4e5085fd8be8c356cba6a625fd1fb9b","time":1695956439000,"email":"1434716883@qq.com","author":"Tstar00","message":"1"},{"hash":"9bb3db1d95a7ed36a53a539e2e0a985d586c1a6f","time":1693500928000,"email":"1434716883@qq.com","author":"Tstar00","message":"修"},{"hash":"96894dbe6c55924a5f26c2dbfe180d8f0edc8453","time":1693223857000,"email":"1434716883@qq.com","author":"Tstar00","message":"改路径"},{"hash":"0f8d422f05753e2557a16ad1918b6155e6ece1bc","time":1692540154000,"email":"zhongzi2333@gmail.com","author":"ChocoFleece","message":"替换图床"},{"hash":"9b330e91546d1f55656dd9d989e692326792e490","time":1691052961000,"email":"1434716883@qq.com","author":"Tstar00","message":"修缮完毕"},{"hash":"a5b0127d873ae808e54be0dd079ef178f99d6370","time":1690888166000,"email":"1434716883@qq.com","author":"Tstar00","message":"1"},{"hash":"7deb619c62be5837e28c33f20d761e2326fe40ed","time":1690871118000,"email":"1434716883@qq.com","author":"Tstar00","message":"新增"}]},"readingTime":{"minutes":5.24,"words":1572},"filePathRelative":"FAQ/In-Games/MissingGraphic.md","autoDesc":true}');export{q as comp,T as data};
