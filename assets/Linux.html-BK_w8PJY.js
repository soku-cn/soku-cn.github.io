import{_ as a,c as i,a as t,o as n}from"./app-DLC6wHL0.js";const r={};function o(s,e){return n(),i("div",null,[...e[0]||(e[0]=[t(`<p>本篇内容是关于如何在 GNU/Linux 使用 wine 运行非想天则及相关程序的。</p><h1 id="安装-wine-并运行带-mod-的非想天则-包括新则" tabindex="-1"><a class="header-anchor" href="#安装-wine-并运行带-mod-的非想天则-包括新则"><span>安装 Wine 并运行带 Mod 的非想天则（包括新则）</span></a></h1><p>Wine 是类 Unix 系统上运行 Windows 程序的兼容层。</p><p>以 Debian、Fedora、Ubuntu 为例，你可以安装发行版维护的 Wine 包，也可以安装 WineHQ 提供的包（<a href="https://wiki.winehq.org/Debian" target="_blank" rel="noopener noreferrer">Debian</a>、<a href="https://wiki.winehq.org/Fedora" target="_blank" rel="noopener noreferrer">Fedora</a>、<a href="https://wiki.winehq.org/Ubuntu" target="_blank" rel="noopener noreferrer">Ubuntu</a>），也可以使用 <a href="https://github.com/lutris/lutris" target="_blank" rel="noopener noreferrer">Lutris</a> 提供的经过了优化的 Wine 包。</p><p>运行 <code>winecfg</code>，在函数库（<code>Libraries</code>）选项卡中添加 <code>d3d9.dll</code> 的配置，设为“原装先于内建”（native, builtin），之后在非想天则目录里运行 <code>wine th123.exe</code> 就可以打则了（在确认能够正常运行前请先在虚拟终端中运行，而非直接在文件管理器中点击运行，以便获取日志定位可能存在的问题）。</p><div class="hint-container info"><p class="hint-container-title">相关信息</p><p>若不使用 Mod，那么不需要进行上面这个设置。非想天则的 mod 是通过劫持 <code>d3d9.dll</code> 来加载的，因此需要配置 Wine 让它此时优先使用 mod 加载器的 <code>d3d9.dll</code>。亦可在环境变量 <code>WINEDLLOVERRIDES=d3d9=n,b</code> 下启动非想天则来做到这一点，反过来说当需要在同一路径下使用原版非想天则时，使用环境变量 <code>WINEDLLOVERRIDES=d3d9=b,n</code> 来运行即可。</p></div><p>此外，<strong>请务必启用 ChainCFix mod！</strong> 详见<a href="#%E8%95%BE%E7%B1%B3%E8%8E%89%E4%BA%9A-c-%E9%93%BE%E4%B8%8D%E5%90%8C%E6%AD%A5%E3%80%81c-%E9%93%BE%E5%8F%98%E6%88%90%E4%B8%8D%E6%AD%A3%E5%B8%B8%E7%9A%84%E7%9F%AD%E9%93%BE">下文</a>。</p><p>若使用中遇到问题可查询下面的文档，若下面文档也未涵盖或无法解决你的问题请向我们反馈。</p><h1 id="已知问题-有解决方案" tabindex="-1"><a class="header-anchor" href="#已知问题-有解决方案"><span>已知问题（有解决方案）</span></a></h1><h2 id="游戏一般性问题" tabindex="-1"><a class="header-anchor" href="#游戏一般性问题"><span>游戏一般性问题</span></a></h2><h3 id="运行带-mod-的非想天则时出现-0108-err-sync-rtlpwaitforcriticalsection-section-7bc6c3c0-dlls-ntdll-loader-c-的报错-标准错误输出-游戏无法启动" tabindex="-1"><a class="header-anchor" href="#运行带-mod-的非想天则时出现-0108-err-sync-rtlpwaitforcriticalsection-section-7bc6c3c0-dlls-ntdll-loader-c-的报错-标准错误输出-游戏无法启动"><span>运行带 Mod 的非想天则时出现 <code>0108:err:sync:RtlpWaitForCriticalSection section 7BC6C3C0 &quot;dlls/ntdll/loader.c…</code> 的报错（标准错误输出），游戏无法启动</span></a></h3><p>完整报错为：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>0108:err:sync:RtlpWaitForCriticalSection section 7BC6C3C0 &quot;dlls/ntdll/loader.c: loader_section&quot; wait timed out in thread 0108, blocked by 0024, retrying (60 sec)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这是 wine 的 bug，但在最新版中已经修复。若遇到这种情况，检查你的 wine 版本是不是在 8.1~8.8 范围内。若是，尝试换用稳定版或 WineQH 最新的测试版包。</p><h3 id="运行则的终端被-0160-fixme-d3d-wined3d-swapchain-present-ignoring-flags-0x1-刷屏" tabindex="-1"><a class="header-anchor" href="#运行则的终端被-0160-fixme-d3d-wined3d-swapchain-present-ignoring-flags-0x1-刷屏"><span>运行则的终端被 <code>0160:fixme:d3d:wined3d_swapchain_present Ignoring flags 0x1.</code> 刷屏</span></a></h3><p>在环境变量 <code>WINEDEBUG=fixme-d3d</code> 下运行非想天则可以关闭这个警告的输出。</p><h3 id="打则时一些图像-比如机体、弹幕-变为白色矩形-终端被-01b8-err-d3d-resource-init-out-of-adapter-memory-刷屏" tabindex="-1"><a class="header-anchor" href="#打则时一些图像-比如机体、弹幕-变为白色矩形-终端被-01b8-err-d3d-resource-init-out-of-adapter-memory-刷屏"><span>打则时一些图像（比如机体、弹幕）变为白色矩形，终端被 <code>01b8:err:d3d:resource_init Out of adapter memory.</code> 刷屏</span></a></h3><p>尤其发生在进入了大厅 mod 的 VS NETWORK 页面后；此外也可能在打街机模式或者故事模式的过程中出现。</p><p>使用 <a href="https://github.com/doitsujin/dxvk" target="_blank" rel="noopener noreferrer">dxvk</a>，或将下面的注册表配置保存为 <code>set-video-memory.reg</code> 并运行 <code>wine regedit set-video-memory.reg</code></p><div class="language-reg line-numbers-mode" data-highlighter="shiki" data-ext="reg" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-reg"><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">Windows Registry Editor Version 5.00</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">[HKEY_CURRENT_USER\\Software\\Wine\\Direct3D]</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">VideoMemorySize</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;=&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1024</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="蕾米莉亚-c-链不同步、c-链变成不正常的短链" tabindex="-1"><a class="header-anchor" href="#蕾米莉亚-c-链不同步、c-链变成不正常的短链"><span>蕾米莉亚 C 链不同步、C 链变成不正常的短链</span></a></h3><p>具体表现为：</p><ul><li>网络对战中使用若干次蕾米莉亚 C 链（不管是哪一方使用）后两方不同步</li><li>蕾米莉亚 C 链变为不正常的短链，攻击效果消失/改变</li></ul><p>源于非想天则的数组越界 bug，但在 Wine 中触发的概率远高于在 Windows 中触发的概率。务必启用 ChainCFix mod，该 mod 修复了这个问题。非想天启启动器的最新 giuroll 更新包中包含了这个 mod，此外亦可在 <a href="https://gitee.com/sanhuizhuan/soku_giuroll_cn/releases" target="_blank" rel="noopener noreferrer">https://gitee.com/sanhuizhuan/soku_giuroll_cn/releases</a> 手动获取。</p><p>若因为某些原因需要打无 Mod 的非想天则，那么请使用 <code>WINEDEBUG=trace+heap</code> 环境变量来启动非想天则，触发概率几乎变为 0（不确定是不是确实变为 0 了）。</p><h3 id="运行非想天则时弹出-dsound-相关错误" tabindex="-1"><a class="header-anchor" href="#运行非想天则时弹出-dsound-相关错误"><span>运行非想天则时弹出 DSound 相关错误</span></a></h3><p>可能是由于 Wine 缺少音频库的依赖。可尝试根据 <a href="https://wiki.archlinux.org/title/wine#Sound" target="_blank" rel="noopener noreferrer">Wine 的 ArchWiki 页面</a>或 <a href="https://github.com/lutris/docs/blob/master/WineDependencies.md" target="_blank" rel="noopener noreferrer">Lutris 给出的 Wine 依赖</a>补齐依赖。</p><h2 id="联机大厅相关" tabindex="-1"><a class="header-anchor" href="#联机大厅相关"><span>联机大厅相关</span></a></h2><p>遇到问题可以对照以下表格更新大厅</p><table><thead><tr><th style="text-align:left;">大厅可能遇到的问题</th><th style="text-align:left;">首次修复问题的大厅mod版本</th></tr></thead><tbody><tr><td style="text-align:left;">Host 或使用 host list 时报 SSL 相关错误</td><td style="text-align:left;">0.6.4</td></tr><tr><td style="text-align:left;">大厅内无法用中文输入法聊天（Wine&gt;=8.8）</td><td style="text-align:left;">0.6.5</td></tr><tr><td style="text-align:left;">加入联机大厅时连接超时或长时间卡在 Joining</td><td style="text-align:left;">0.6.6.1</td></tr></tbody></table><p>（总而言之把大厅 mod 更新到 0.6.6.1 或以上的最新版就好）</p><p>在聊天框打字时若遇到光标与文字之间对不齐的问题（尤其文字中包含英文字母时），可使用 <code>FREETYPE_PROPERTIES=&quot;truetype:interpreter-version=35&quot;</code> 环境变量来运行，或使用低于 <code>7.17</code> 版本的 Wine。</p><p>若遇其他问题请向我们进行反馈。</p><h2 id="swarm-相关" tabindex="-1"><a class="header-anchor" href="#swarm-相关"><span>Swarm 相关</span></a></h2><p>直接使用<a href="https://github.com/evshiron/swarm-ng-build/releases" target="_blank" rel="noopener noreferrer">Swarm-NG仓库</a>的Linux发行版即可。</p><figure><img src="https://bu.dusays.com/2024/01/21/65acf18dc1dc4.webp" alt="图片加载中..." width="400" tabindex="0" loading="lazy"><figcaption>Linux Mods</figcaption></figure>`,36)])])}const c=a(r,[["render",o]]),l=JSON.parse('{"path":"/FAQ/Failed-to-Start/Linux.html","title":"在 GNU/Linux 下运行非想天则","lang":"zh-CN","frontmatter":{"title":"在 GNU/Linux 下运行非想天则","icon":"file-lines","editLink":false,"prev":false,"next":false,"order":30,"date":"2023-09-09T00:00:00.000Z","author":"Hagb","description":"本篇内容是关于如何在 GNU/Linux 使用 wine 运行非想天则及相关程序的。 安装 Wine 并运行带 Mod 的非想天则（包括新则） Wine 是类 Unix 系统上运行 Windows 程序的兼容层。 以 Debian、Fedora、Ubuntu 为例，你可以安装发行版维护的 Wine 包，也可以安装 WineHQ 提供的包（Debian、...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"在 GNU/Linux 下运行非想天则\\",\\"image\\":[\\"https://bu.dusays.com/2024/01/21/65acf18dc1dc4.webp \\\\\\"Linux Mods\\\\\\"\\"],\\"datePublished\\":\\"2023-09-09T00:00:00.000Z\\",\\"dateModified\\":\\"2025-09-24T05:46:06.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Hagb\\"}]}"],["meta",{"property":"og:url","content":"https://wiki.514.live/FAQ/Failed-to-Start/Linux.html"}],["meta",{"property":"og:site_name","content":"非想天则指南"}],["meta",{"property":"og:title","content":"在 GNU/Linux 下运行非想天则"}],["meta",{"property":"og:description","content":"本篇内容是关于如何在 GNU/Linux 使用 wine 运行非想天则及相关程序的。 安装 Wine 并运行带 Mod 的非想天则（包括新则） Wine 是类 Unix 系统上运行 Windows 程序的兼容层。 以 Debian、Fedora、Ubuntu 为例，你可以安装发行版维护的 Wine 包，也可以安装 WineHQ 提供的包（Debian、..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://bu.dusays.com/2024/01/21/65acf18dc1dc4.webp \\"Linux Mods\\""}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-09-24T05:46:06.000Z"}],["meta",{"property":"article:author","content":"Hagb"}],["meta",{"property":"article:published_time","content":"2023-09-09T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-09-24T05:46:06.000Z"}]]},"git":{"createdTime":1694254606000,"updatedTime":1758692766000,"contributors":[{"name":"ChocoFleece","username":"ChocoFleece","email":"zhongzi2333@gmail.com","commits":5,"url":"https://github.com/ChocoFleece"},{"name":"Hagb","username":"Hagb","email":"hagb@hagb.name","commits":3,"url":"https://github.com/Hagb"},{"name":"Tstar00","username":"Tstar00","email":"1434716883@qq.com","commits":4,"url":"https://github.com/Tstar00"},{"name":"zhongzi26","username":"zhongzi26","email":"zhongzi2333@gmail.com","commits":1,"url":"https://github.com/zhongzi26"}],"changelog":[{"hash":"9fdbaeeca13c7d4c306d837d8d2e4d2c16626728","time":1758692766000,"email":"zhongzi2333@gmail.com","author":"zhongzi26","message":"将全站所有图片更新至新版语法，以及一些修补。"},{"hash":"838015090e9b4f54280538a4f18fa2439b02e85e","time":1730128633000,"email":"1434716883@qq.com","author":"Tstar00","message":"主页2"},{"hash":"e47ce5da8d8327d189962550643fbf82ee46a9ee","time":1717476041000,"email":"1434716883@qq.com","author":"Tstar00","message":"linux"},{"hash":"1857b2b585f979cc34dd297df0229abd4027f936","time":1717062182000,"email":"1434716883@qq.com","author":"Tstar00","message":"部分英语页面"},{"hash":"45baccc508e0e07454e99fd1af57e05485a187d7","time":1713136061000,"email":"zhongzi2333@gmail.com","author":"ChocoFleece","message":"内容修正"},{"hash":"01414588a1b811895e72d4ec086fe84ceac051ba","time":1705833021000,"email":"1434716883@qq.com","author":"Tstar00","message":"1"},{"hash":"2e49e696b7e9252cde6a396fdbdddcff1315243f","time":1697445174000,"email":"hagb@hagb.name","author":"Hagb","message":"添加启动器启动失败（<code>OSError 9</code>）的说明"},{"hash":"322526f4304c89d865836956cca3f34422d1ed00","time":1697445145000,"email":"hagb@hagb.name","author":"Hagb","message":"添加 ChainCFix Mod 的获取途径"},{"hash":"420b5ca48a923786de69d79390076752a573026d","time":1697444934000,"email":"hagb@hagb.name","author":"Hagb","message":"修正 DSound 相关章节的位置"},{"hash":"a7821701f8a54890e57b14b0aa96dbf31c1d3a66","time":1694827470000,"email":"zhongzi2333@gmail.com","author":"ChocoFleece","message":"Linux打则指南更新SwarmNG"},{"hash":"59265e2b7bdf571b1b5b53aa1349ea930034fcf3","time":1694255063000,"email":"zhongzi2333@gmail.com","author":"ChocoFleece","message":"修正文本"},{"hash":"7a34a3ec71116bad7eaa710febe5f8a0505a2ce5","time":1694254937000,"email":"zhongzi2333@gmail.com","author":"ChocoFleece","message":"Linux打则指南"},{"hash":"0bd5bfe743799cac86b8dbe246e6fd9d4331525b","time":1694254606000,"email":"zhongzi2333@gmail.com","author":"ChocoFleece","message":"Linux打则指南"}]},"readingTime":{"minutes":4.01,"words":1204},"filePathRelative":"FAQ/Failed-to-Start/Linux.md","autoDesc":true}');export{c as comp,l as data};
